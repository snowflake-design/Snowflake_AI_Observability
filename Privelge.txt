USE ROLE ACCOUNTADMIN;

GRANT DATABASE ROLE SNOWFLAKE.CORTEX_USER TO ROLE abc_admin;
GRANT APPLICATION ROLE SNOWFLAKE.AI_OBSERVABILITY_EVENTS_LOOKUP TO ROLE abc_admin;
GRANT CREATE EXTERNAL AGENT ON SCHEMA [YOUR_DATABASE].[YOUR_SCHEMA] TO ROLE abc_admin;
GRANT USAGE ON DATABASE [YOUR_DATABASE] TO ROLE abc_admin;
GRANT USAGE ON SCHEMA [YOUR_DATABASE].[YOUR_SCHEMA] TO ROLE abc_admin;

-- Optional admin role
GRANT APPLICATION ROLE SNOWFLAKE.AI_OBSERVABILITY_ADMIN TO ROLE abc_admin;

-- Switch to your role and verify access
USE ROLE abc_admin;
SHOW GRANTS TO ROLE abc_admin;

-- Test access to AI observability
USE SCHEMA SNOWFLAKE.LOCAL;
SELECT COUNT(*) FROM AI_OBSERVABILITY_EVENTS;
